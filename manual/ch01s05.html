<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="autor" content="Roy Gu (roy@solarphp.cn)" /><meta name="copyright" content="Solar Framework for PHP 5 In China" /><meta name="description" content="Solar Php框架 最佳实践框架 完全面向对象 企设级应用设计模式 超强命令行工具 | Solar 中国"  /><meta name="keywords" content="php, framework, 框架, php框架, solar, solarphp" />
   <title>1.5. &#20174;&#25968;&#25454;&#34920;&#21019;&#24314;&#27169;&#22411;</title><link rel="stylesheet" href="style.css" type="text/css"><link rel="stylesheet" type="text/css" href="../css/layout.css" media="screen" /><meta name="generator" content="DocBook XSL-NS Stylesheets V1.75.2"><link rel="home" href="index.html" title="Solar PHP &#20013;&#25991;&#25945;&#31243;"><link rel="up" href="ch01.html" title="Chapter&nbsp;1.&nbsp;&#24555;&#36895;&#20837;&#38376;---&#31616;&#21333;&#21338;&#23458;&#28436;&#31034;"><link rel="prev" href="ch01s04.html" title="1.4. &#37197;&#32622;&#31995;&#32479;"><link rel="next" href="ch01s06.html" title="1.6. &#21019;&#24314;&#19968;&#20010;&#22522;&#26412;&#24212;&#29992;"><link rel="part" href="pt01.html" title="Part&nbsp;I.&nbsp;&#25196;&#24070;&#36215;&#33322;"><link rel="chapter" href="ch01.html" title="Chapter&nbsp;1.&nbsp;&#24555;&#36895;&#20837;&#38376;---&#31616;&#21333;&#21338;&#23458;&#28436;&#31034;"><link rel="chapter" href="ch02.html" title="Chapter&nbsp;2.&nbsp;&#21160;&#24577;&#35843;&#24230;&#21608;&#26399;"><link rel="chapter" href="ch03.html" title="Chapter&nbsp;3.&nbsp;&#21644;&#27169;&#22411;&#19968;&#36215;&#36339;&#21326;&#23572;&#20857;"><link rel="chapter" href="ch04.html" title="Chapter&nbsp;4.&nbsp;&#21644;&#20851;&#31995;&#27169;&#22411;&#36530;&#29483;&#29483;"><link rel="chapter" href="ch05.html" title="Chapter&nbsp;5.&nbsp;&#35270;&#22270;&#21644;&#24067;&#23616;"><link rel="chapter" href="ch06.html" title="Chapter&nbsp;6.&nbsp;&#27169;&#22411;&#21644;&#34920;&#21333;"><link rel="chapter" href="ch07.html" title="Chapter&nbsp;7.&nbsp;&#29992;&#25143;&#35748;&#35777;&#12289;&#35282;&#33394;&#21450;&#35775;&#38382;&#25511;&#21046;"><link rel="chapter" href="ch08.html" title="Chapter&nbsp;8.&nbsp;&#21629;&#20196;&#34892;&#24037;&#20855;"><link rel="chapter" href="ch09.html" title="Chapter&nbsp;9.&nbsp;&#37038;&#20214;"><link rel="part" href="pt02.html" title="Part&nbsp;II.&nbsp;&#38468;&#24405;"><link rel="appendix" href="apa.html" title="Appendix&nbsp;A.&nbsp;&#39033;&#30446;&#26631;&#20934;"><link rel="appendix" href="apb.html" title="Appendix&nbsp;B.&nbsp;&#21629;&#21517;&#35268;&#33539;"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div id="view"><!-- #header (main heading + logo with slogan) --><div id="head"><!-- main headings with search component --><div id="main"><h1><a href="/">SOLAR</a><sup><a href="http://solarphp.org.cn/viewtopic.php?f=13&t=165" target="_blank">1.1.2</a></sup></h1>      <h2><a href="#">Framework for PHP	5</a></h2></div><!-- /main headings with search component -->    <hr class="hidden" /><!-- main horizontal menu --><div id="mainMenu"><ul><li><a href="../">首　页<span></span></a></li><li><a href="../project.php">Solar 项目<span></span></a></li><li class="active"><a href="../manual-new/">用户手册<span></span></a></li> <li><a href="http://forum.solarphp.cn" target="_blank">开发者社区<span></span></a></li><li><a href="http://bug.solarphp.cn" target="_blank">Bug 跟踪<span></span></a></li><li><a href="../contributor.php">Contributor<span></span></a></li><li class="fr"><a href="http://solarphp.cn/apidoc/">API 文档<span></span></a></li><li class="fr"><a href="http://demo.solarphp.cn" target="_blank">Solar Demo<span></span></a></li></ul></div>    <!-- /main horizontal menu --><hr class="hidden" /><!-- logo with slogan --><div id="logo"></div>    <!-- /logo with slogan --><hr class="hidden" /></div><!-- /#header (main heading + logo with slogan) -->  <!-- #main content construct --><div id="content"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">1.5. &#20174;&#25968;&#25454;&#34920;&#21019;&#24314;&#27169;&#22411;</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch01s04.html">Prev</a>&nbsp;</td><th width="60%" align="center">Chapter&nbsp;1.&nbsp;&#24555;&#36895;&#20837;&#38376;---&#31616;&#21333;&#21338;&#23458;&#28436;&#31034;</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="ch01s06.html">Next</a></td></tr></table><hr></div><div class="sect1" title="1.5. &#20174;&#25968;&#25454;&#34920;&#21019;&#24314;&#27169;&#22411;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d4e168"></a>1.5. &#20174;&#25968;&#25454;&#34920;&#21019;&#24314;&#27169;&#22411;</h2></div></div></div>
                
                <p>&#22312;&#36825;&#20043;&#21069;&#65292;&#20320;&#24050;&#32463;&#19979;&#36733;&#20102;Solar&#31995;&#32479;&#65292;&#21019;&#24314;&#20102;&#24037;&#20316;&#21306;&#24182;&#20570;&#20102;&#19968;&#20123;&#37197;&#32622;&#12290;&#25509;&#19979;&#26469;&#65292;&#25105;&#20204;&#23558;&#21019;&#24314;&#25968;&#25454;&#34920;&#65292;&#24182;&#21019;&#24314;&#19982;&#20043;&#23545;&#24212;&#30340;&#27169;&#22411;&#12290;</p>
                <p>
                    </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
                            <p>&#22312;&#25968;&#25454;&#24211;&#20013;&#21019;&#24314;blogs&#34920;</p>
                            <pre class="programlisting">-- SQLite
CREATE TABLE blogs (
    id      INTEGER PRIMARY KEY AUTOINCREMENT,
    created TIMESTAMP DEFAULT NULL,
    updated TIMESTAMP DEFAULT NULL,
    status  VARCHAR(15),
    title   VARCHAR(63) NOT NULL,
    body    CLOB
);

-- MySQL
CREATE TABLE blogs (
    id      INTEGER AUTO_INCREMENT PRIMARY KEY,
    created DATETIME DEFAULT NULL,
    updated DATETIME DEFAULT NULL,
    status  VARCHAR(15),
    title   VARCHAR(63) NOT NULL,
    body    TEXT
);

-- PostgreSQL
CREATE TABLE blogs (
    id      SERIAL PRIMARY KEY,
    created TIMESTAMP DEFAULT NULL,
    updated TIMESTAMP DEFAULT NULL,
    status  VARCHAR(15),
    title   VARCHAR(63) NOT NULL,
    body    LONGTEXT
);</pre>
                            <div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top">
                                <p>&#22914;&#26524;&#20320;&#20351;&#29992;SQLite&#65292;&#37027;&#20040;&#20320;&#38656;&#35201;&#32473;web&#26381;&#21153;&#22120;&#26435;&#38480;&#21435;&#35835;&#20889;&#25968;&#25454;&#24211;&#12290;</p>
                            </td></tr></table></div>
                        </li><li class="listitem">
                            <p>&#29616;&#22312;&#25105;&#20204;&#24050;&#32463;&#21019;&#24314;&#20102;&#19968;&#24352;&#34920;&#65292;&#25509;&#19979;&#26469;&#22312;&#34920;&#20013;&#28155;&#21152;&#21407;&#29983;&#30340;&#25968;&#25454;&#20197;&#20415;&#21518;&#38754;&#26377;&#25968;&#25454;&#21487;&#25805;&#20316;&#12290;</p>
                            <pre class="programlisting">INSERT INTO blogs (created, updated, status, title, body) VALUES (
    '2010-01-01 00:00:00',
    '2010-01-01 00:00:00',
    'public',
    'Public Blog Entry',
    'First post!'
);

INSERT INTO blogs (created, updated, status, title, body) VALUES (
    '2010-01-01 06:00:00',
    '2010-01-01 06:00:00',
    'draft',
    'A Draft Article',
    'My, it sure is drafty in here.'
);

INSERT INTO blogs (created, updated, status, title, body) VALUES (
    '2010-01-01 12:00:00',
    '2010-01-01 12:00:00',
    'draft',
    'Please delete me',
    'This is here to be deleted.'
);</pre>
                        </li><li class="listitem">
                            <p>&#20999;&#25442;&#33267;&#21629;&#20196;&#34892;&#29615;&#22659;&#65292;&#36827;&#20837;SYSTEM&#30446;&#24405;&#65292;&#20351;&#29992;make-model&#21629;&#20196;&#65292;&#20320;&#23558;&#20250;&#30475;&#21040;&#31867;&#20284;&#19979;&#38754;&#36825;&#31181;&#21160;&#20316;&#65306;</p>
                            <pre class="screen">$ ./script/solar make-model Acme_Model_Blogs
Making model 'Acme_Model_Blogs'.
Will write to 'SYSTEM/include/'.
Making model 'Acme_Model_Blogs'.
Will write to '/Users/pmjones/Sites/blog-demo/include/'.
Using table 'blogs'.
Not using inheritance.
Making class directory ... done.
Writing model class ... done.
Writing record class ... done.
Writing collection class ... done.
Connecting to database for metadata ...connected.
Fetching table cols ... done.
Fetching index info ... no indexes found.
Writing metadata class ... done.
Creating locale directory ... done.
Saving locale file for en_US ... done.
$</pre>
                            <div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top">
                                <p>&#36825;&#37324;&#21457;&#29983;&#20102;&#20160;&#20040;&#65311;Solar&#25509;&#25910;&#36890;&#36807;make-model&#20256;&#36882;&#30340;&#21442;&#25968;&#65292;&#20351;&#29992;&#26368;&#21518;&#19968;&#20010;&#19979;&#21010;&#32447;&#20043;&#21518;&#30340;&#37096;&#20998;&#20316;&#20026;&#34920;&#21517;&#65292;&#25509;&#30528;Solar&#20250;&#22312;&#25968;&#25454;&#24211;&#20013;&#26597;&#25214;&#35813;&#34920;&#24182;&#21019;&#24314;&#27169;&#22411;&#23450;&#20041;&#12289;&#35760;&#24405;&#31867;&#12289;&#26597;&#35810;&#31867;&#12289;&#21015;&#21644;&#32034;&#24341;&#20449;&#24687;&#21450;&#26412;&#22320;&#21270;&#23383;&#31526;&#25991;&#20214;&#12290;</p>
                            </td></tr></table></div>
                        </li><li class="listitem">
                            <p>&#23545;&#20110;&#22522;&#26412;&#30340;&#23383;&#27573;&#39564;&#35777;&#65288;&#20363;&#22914;&#65306;NOT
                                NULL&#23383;&#27573;&#22312;&#20445;&#23384;&#20043;&#21069;&#19981;&#33021;&#20026;&#31354;&#65289;&#65292;Solar&#27169;&#22411;&#22788;&#29702;&#24471;&#30456;&#24403;&#22909;&#12290;&#20294;&#26159;&#65292;&#36825;&#21487;&#33021;&#19981;&#22815;&#65292;&#25105;&#20204;&#36890;&#24120;&#36824;&#38656;&#35201;&#22312;&#27169;&#22411;&#25968;&#25454;&#19978;&#21152;&#19978;&#39069;&#22806;&#30340;&#39564;&#35777;&#26465;&#20214;&#12290;&#19979;&#38754;&#25105;&#20204;&#26469;&#25913;&#21464;status&#23383;&#27573;&#30340;&#39564;&#35777;&#26465;&#20214;&#65292;&#32422;&#26463;&#20854;&#24517;&#39035;&#22312;&#26576;&#20010;&#38598;&#21512;&#25110;&#21015;&#34920;&#20013;&#21462;&#20540;&#12290;</p>
                            <p>&#25171;&#24320;SYSTEM/source/acme/Acme/Model/Blogs.php&#25991;&#20214;&#65292;&#32534;&#36753;_setup()&#26041;&#27861;&#65292;&#20026;status&#23383;&#27573;&#28155;&#21152;&#19968;&#20010;&#36807;&#28388;&#22120;&#12290;</p>
                            <pre class="programlisting"><span class="hl-directive" style="color: maroon">&lt;?php</span>
    <b class="hl-keyword">protected</b> <b class="hl-keyword">function</b> _setup()
    {
        <i class="hl-comment" style="color: silver">// chain to parent</i>
        parent::_setup();
    
        <i class="hl-comment" style="color: silver">// add a validation filter on the status column</i>
        $this-&gt;_addFilter(<b class="hl-string"><i style="color:red">'status'</i></b>, <b class="hl-string"><i style="color:red">'validateInList'</i></b>, <b class="hl-keyword">array</b>(
            <b class="hl-string"><i style="color:red">'draft'</i></b>,
            <b class="hl-string"><i style="color:red">'public'</i></b>,
        ));
    }</pre>
                            <div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top">
                                <p>Solar&#20013;&#26377;&#24456;&#22810;&#20851;&#20110;&#39564;&#35777;&#21644;&#23457;&#26597;&#25968;&#25454;&#30340;&#36807;&#28388;&#22120;&#12290;&#20855;&#20307;&#21487;&#21442;&#32771;Solar_Filter&#21253;&#12290; </p>
                            </td></tr></table></div>
                        </li></ol></div><p>
                </p>
            </div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch01s04.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="ch01.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="ch01s06.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">1.4. &#37197;&#32622;&#31995;&#32479;&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;1.6. &#21019;&#24314;&#19968;&#20010;&#22522;&#26412;&#24212;&#29992;</td></tr></table></div></div>  <!-- /#main content construct --> <!-- #footer -->  <div id="foot">  <p class="fl">Copyright &copy; 2010 Solar For PHP 5 In China, All Rights Reserved.</p>    <!-- /#   LINKS AND AUTHOR-SIGNATURE CANNOT BE REMOVED !!! -->    <p class="fr">Powered By&nbsp;&nbsp;<a href="mailto:roy@solarphp.cn">Roy Gu</a><span id="cnzz"><script src="http://s16.cnzz.com/stat.php?id=2386648&web_id=2386648&show=pic" language="JavaScript"></script></span>    </p>  </div>  <hr class="hidden" />  <div class="clear"></div>  <div id="solarcopy">  <a href="http://solarphp.cn" target="_blank"><img src="../images/solar-button-1.gif" style="border: 0 !important;" /></a>  <a href="http://solarphp.cn" target="_blank"><img src="../images/solar-button-2.gif" style="border: 0 !important;" /></a>  <br />  <script type="text/javascript" src="http://widgets.amung.us/small.js"></script><script type="text/javascript">WAU_small('mzsrzilnbxkw')</script></div> <!-- /#footer --></div></body></html>